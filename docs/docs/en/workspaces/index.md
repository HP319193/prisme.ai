# Workspaces

## Definitions

A workspace is a project that :  

* Enables various [**Automations**](automations) inside your IT organization, between your APIs, ...
* Is easily **configurable** through workspace [**config**](#config), [**Apps**](apps) and automations **graph** 
* Produces [**events**](#events) recording what's happening and optionally triggering **Automations**  
* Present computed data / events through [**Web Pages**](pages) accessible to admins or event external end users
* Has [**configurable roles**](security) providing distinct user groups with fine grained permissions 


## Config

For now, workspace config is only configurable from source code :  

```yaml
name: MyConfiguredWorkspace
config:
  value:
    API_URL: https://api.mycompany.com
    LOGIN_URL: "{{config.API_URL}}/login"
    headers:
      apiKey: someAPIKey

automations:
  fetchMyAPI:
    ...
    do:
      - fetch:
          url: '{{config.API_URL}}'
          headers: '{{config.headers}}'
```  

The **config.value** field defined at the top of this workspace is exposed as a **config** variable inside your automations.  
This **config** variable is also avaible in the workspace config itself, as well as in installed apps config.  
[More details on variables usage](automations#variables).  

The **config** object accepts an additional field specific to apps : [**config.schema**](apps#defining-an-app-config-schema)

## Versioning and backups
Versions can be made to store the current workspace's state. It includes everything in the workspace. Later on, you can
restore your workspace to be in the same state as a previous version (current Automations, apps, pages, config will be replaced).
To save the current state, simply access the workspace's settings, then "create a version".
In the newly shown input, you can leave a message to recognize this version, or leave it blank.  
To restore a previous version, access the event feed, and on "filters", select "filters suggestions", and finally "Workspace versions".
The activity feed will now show all your versions. 

<a href="https://www.loom.com/share/67483c03226647bb8e8fb8824ccfd78c">
    <p>Versionning - EN - Watch Video</p>
    <img style="max-width:300px;" src="https://cdn.loom.com/sessions/thumbnails/67483c03226647bb8e8fb8824ccfd78c-with-play.gif">
  </a>

## Events  
Each workspace has a continuous and real-time stream of **events** describing what's happening at any time.  
Events can be **native** or **custom** :  

* **Native events** are automatically generated by the platform throughout the workspace's lifetime : Updates, input webhooks, errors, automation executions, ...  
* **Custom events** (or **application events**) are emitted either by your own automations or the apps you installed  

Workspaces can **emit** custom events in order to simply record that something special happened or to trigger some other automations which will be executed in parallel.  
Workspaces can **listen** to [some **native events**](automations#supported-native-events) and [every custom events](automations#events) in order to execute any desired workflow inside theirs [automations](automations).  

Events are stored up to 3 years after their creation and can ben viewed / searched at anytime from the **Activity** view of the workspace.

<a href="https://www.loom.com/share/0d60cacef42e4600aade3972050d53fe">
    <p>Activity View - Watch Video</p>
    <img style="max-width:300px;" src="https://cdn.loom.com/sessions/thumbnails/0d60cacef42e4600aade3972050d53fe-with-play.gif">
  </a>

Every event includes a **source** field with many useful information including the following ones :  

* **source.userId** : Authenticated user id, **only set** for user emitted events and `runtime.automations.executed` events emitted while processing some user event  
* **source.sessionId** : Authenticated user session id, **shared by all events** emitted in relation with the user session  
* **source.correlatonId** : Unique id shared by every events emitted in relation with the same initial trigger  
* **source.automationSlug** : Automation slug from which this event has been emitted  
* **source.appInstanceFullSlug** : If any, source app instance full slug
* **source.http** : Source http request details, if any  

For security reason, events emitted from a nested app (i.e an app installed within an app installed in your workspace) will not be visible to the root workspace events feed.  
