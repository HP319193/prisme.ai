name: imports
imports:
  basicApp:
    appSlug: basicApp

automations:
  empty:
    name: empty
    do:
      - emit:
          event: basicApp.triggerEmpty
          payload:
            foo: blah
    output:
      foo: bar
    when:
      events:
        - run.empty
      endpoint: true


  throw:
    name: throw
    do:
      - emit:
          event: basicApp.throw
    when:
      events:
        - throw
      endpoint: true

  listenBasicAppEvents:
    name: listenBasicAppEvents
    when:
      events:
        - basicApp.forParentWorkspace
    output: '{{payload}}'
    do: []

  callChildAutomation:
    name: callChildAutomation
    output: '{{output}}'
    when:
      events:
        - callChildAutomation
    do:
      - basicApp.callsAnotherAutomation:
          payload:
            user: '{{user.id}}'

